name: "LibreLinkUp MQTT"
slug: "librelinkup_mqtt"
description: "Fetch LibreLinkUp data every 60s and publish to MQTT (raw + ESP32-compatible filtered)."
version: "1.0.0"
arch:
  - amd64
  - aarch64
  - armv7
startup: services
boot: auto
init: false
hassio_api: false
homeassistant_api: false
host_network: true
uart: false
map:
  - config:rw

options:
  email: ""
  password: ""
  interval: 60

  # sync/offset
  fetch_offset: 5.0
  fetch_offset_target_lag: 5.0
  fetch_offset_min: 1.0
  fetch_offset_max: 20.0
  fetch_offset_gain: 0.3
  fetch_offset_max_step: 1.0
  tz: "Europe/Berlin"

  # API/HTTP
  api_base: "https://api.libreview.io"
  timeout: 15
  connection_close: false
  verify_tls: true
  graph_limit: 0
  debug: false

  # MQTT
  mqtt_publish: true
  mqtt_host: "192.168.0.202"
  mqtt_port: 1883
  mqtt_user: ""
  mqtt_password: ""
  mqtt_base_topic: "librelinkup"
  master_id: "MASTER"
  mqtt_topic_raw_suffix: "data_all"
  mqtt_topic_filtered_suffix: "data_raw"
  mqtt_publish_raw: false
  mqtt_publish_filtered: true
  mqtt_retain: true
  mqtt_qos: 0

schema:
  email: str
  password: password
  interval: int

  fetch_offset: float
  fetch_offset_target_lag: float
  fetch_offset_min: float
  fetch_offset_max: float
  fetch_offset_gain: float
  fetch_offset_max_step: float
  tz: str

  api_base: str
  timeout: int
  connection_close: bool
  verify_tls: bool
  graph_limit: int
  debug: bool

  mqtt_publish: bool
  mqtt_host: str
  mqtt_port: int
  mqtt_user: str
  mqtt_password: password
  mqtt_base_topic: str
  master_id: str
  mqtt_topic_raw_suffix: str
  mqtt_topic_filtered_suffix: str
  mqtt_publish_raw: bool
  mqtt_publish_filtered: bool
  mqtt_retain: bool
  mqtt_qos: int